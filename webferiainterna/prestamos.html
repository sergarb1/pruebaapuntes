<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gesti√≥n de Pr√©stamos - Intranet</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: { 
                    colors: { 
                        brand: '#00dc82', 
                        dark: '#0f172a', 
                        card: '#1e293b',
                        accent: '#38bdf8' 
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #e2e8f0; }</style>
</head>
<body class="antialiased min-h-screen flex flex-col md:flex-row">

    <!-- Sidebar de Navegaci√≥n -->
    <aside class="w-full md:w-64 bg-slate-900 border-r border-slate-800 flex flex-col shrink-0">
        <div class="p-6 flex items-center gap-3 border-b border-slate-800">
            <div class="w-8 h-8 bg-brand rounded-lg flex items-center justify-center text-slate-900 font-black">FP</div>
            <div>
                <h1 class="font-bold text-white text-sm leading-tight">ASISTENCIA A<br>LA DIRECCI√ìN</h1>
                <p class="text-[10px] text-brand uppercase tracking-wider font-bold">Panel de Control v2.0</p>
            </div>
        </div>

        <nav class="flex-grow p-4 space-y-2">
            <p class="px-4 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-4">Operativa</p>
            <a href="index.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>‚ö°</span> Dashboard
            </a>
            <a href="atencion.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üíÅ‚Äç‚ôÇÔ∏è</span> Atenci√≥n Visitante
            </a>
            <a href="registro.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üìù</span> Registro Incidencias
            </a>
            <a href="cuadrantes.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üìÖ</span> Cuadrantes Prof.
            </a>
            <a href="grupos.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üë•</span> Flujo de Grupos
            </a>
            <a href="prestamos.html" class="flex items-center gap-3 px-4 py-3 bg-brand/10 text-brand rounded-xl font-bold text-sm border border-brand/20">
                <span>üìñ</span> Pr√©stamo Express
            </a>
            <a href="manual_stands.html" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üè∑Ô∏è</span> Manual de Stands
            </a>
            <a href="cierre.html" class="flex items-center gap-3 px-4 py-3 text-red-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors border border-red-500/20 mt-4">
                <span>üèÅ</span> Checklist de Cierre
            </a>
            
            <p class="px-4 text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 mt-6">Recursos</p>
            <a href="../herramientas_apoyo/guion_moderacion.html" class="flex items-center gap-3 px-4 py-3 text-emerald-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors border border-emerald-500/20">
                <span>üé§</span> Guion Mesa Redonda
            </a>
            <a href="../documentacion/emails.html" target="_blank" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üìß</span> Plantillas Email
            </a>
            <a href="../webferia/index.html" target="_blank" class="flex items-center gap-3 px-4 py-3 text-slate-400 hover:text-white hover:bg-slate-800 rounded-xl text-sm transition-colors">
                <span>üåç</span> Ver Web P√∫blica
            </a>
        </nav>

        <div class="p-4 border-t border-slate-800">
            <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-4 text-center">
                <p class="text-xs text-white/80 font-medium mb-1">Proyecto Real</p>
                <p class="text-white font-bold text-sm">IES Serra Perenxisa</p>
            </div>
        </div>
    </aside>

    <main id="app" class="flex-grow p-4 md:p-8 overflow-y-auto">
        
        <header class="mb-8 flex justify-between items-end border-b border-slate-800 pb-6">
            <div>
                <h2 class="text-3xl font-black text-white italic tracking-tighter uppercase">PR√âSTAMO EXPRESS üìö</h2>
                <p class="text-slate-400 text-xs font-bold uppercase tracking-widest mt-1">Control de Inventario en Tiempo Real</p>
            </div>
            <div class="text-right">
                <span class="bg-brand/20 text-brand px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest">{{ activeLoans.length }} Libros fuera</span>
            </div>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <!-- Formulario de Pr√©stamo -->
            <div class="lg:col-span-1">
                <div class="bg-slate-800 rounded-2xl border border-slate-700 p-6 sticky top-8 shadow-xl">
                    <h2 class="text-xs font-bold text-brand uppercase mb-6 tracking-widest">Nuevo Pr√©stamo</h2>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[10px] font-bold text-slate-500 uppercase ml-1">Alumno/a</label>
                            <input v-model="newLoan.student" placeholder="Nombre completo" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl outline-none focus:border-brand text-sm text-white">
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-slate-500 uppercase ml-1">Curso</label>
                            <select v-model="newLoan.grade" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl outline-none focus:border-brand text-sm text-white">
                                <option>1¬∫ ESO</option><option>2¬∫ ESO</option><option>3¬∫ ESO</option><option>4¬∫ ESO</option>
                                <option>1¬∫ BACH</option><option>2¬∫ BACH</option><option>Ciclo FP</option>
                            </select>
                        </div>
                        <div>
                            <label class="text-[10px] font-bold text-slate-500 uppercase ml-1">T√≠tulo del Libro</label>
                            <input v-model="newLoan.book" placeholder="Nombre del libro" class="w-full bg-slate-900 border border-slate-700 p-3 rounded-xl outline-none focus:border-brand text-sm text-white">
                        </div>
                        <button @click="addLoan" class="w-full py-4 bg-brand text-slate-900 font-black rounded-xl hover:scale-[1.02] transition-transform uppercase tracking-widest mt-4">
                            Registrar Salida
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lista de Libros fuera -->
            <div class="lg:col-span-2">
                <div class="bg-slate-800 rounded-2xl border border-slate-700 overflow-hidden shadow-xl">
                    <table class="w-full text-left text-sm">
                        <thead class="bg-slate-900 text-slate-500 uppercase text-[10px] font-bold border-b border-slate-700">
                            <tr>
                                <th class="px-6 py-4">Libro</th>
                                <th class="px-6 py-4">Prestado a</th>
                                <th class="px-6 py-4 text-center">Acci√≥n</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-700/50">
                            <tr v-for="loan in activeLoans" :key="loan.id" class="hover:bg-slate-700/30 transition-colors">
                                <td class="px-6 py-4">
                                    <p class="text-white font-bold">{{ loan.book }}</p>
                                    <p class="text-[10px] text-slate-500 font-mono italic">{{ loan.time }}</p>
                                </td>
                                <td class="px-6 py-4">
                                    <p class="text-slate-200 font-medium">{{ loan.student }}</p>
                                    <p class="text-[10px] text-brand uppercase font-bold">{{ loan.grade }}</p>
                                </td>
                                <td class="px-6 py-4 text-center">
                                    <button @click="returnBook(loan.id)" class="bg-slate-900 hover:bg-brand hover:text-slate-900 text-brand border border-brand/30 px-3 py-1 rounded-lg text-[10px] font-bold transition-all">
                                        MARCAR DEVOLUCI√ìN
                                    </button>
                                </td>
                            </tr>
                            <tr v-if="activeLoans.length === 0">
                                <td colspan="3" class="px-6 py-12 text-center text-slate-500 italic">No hay pr√©stamos activos en este momento.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </main>

    <script>
        const { createApp, ref } = Vue
        createApp({
            setup() {
                const activeLoans = ref([])
                const newLoan = ref({ student: '', grade: '1¬∫ ESO', book: '' })

                const addLoan = () => {
                    if (newLoan.value.student && newLoan.value.book) {
                        const now = new Date()
                        activeLoans.value.unshift({
                            id: Date.now(),
                            student: newLoan.value.student,
                            grade: newLoan.value.grade,
                            book: newLoan.value.book,
                            time: now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0')
                        })
                        newLoan.value = { student: '', grade: '1¬∫ ESO', book: '' }
                    }
                }

                const returnBook = (id) => {
                    activeLoans.value = activeLoans.value.filter(l => l.id !== id)
                }

                return { activeLoans, newLoan, addLoan, returnBook }
            }
        }).mount('#app')
    </script>
</body>
</html>